<button mat-icon-button [matMenuTriggerFor]="notificationMenu" matTooltip="Notificaciones">
  <mat-icon [matBadge]="unreadCount" [matBadgeHidden]="unreadCount === 0" matBadgeColor="warn">
    notifications
  </mat-icon>
</button>

<mat-menu #notificationMenu="matMenu" class="notification-menu">
  <div class="notification-header" (click)="$event.stopPropagation()">
    <h3>Notificaciones</h3>
    <button mat-button *ngIf="unreadCount > 0" (click)="markAllAsRead()">
      Marcar todas como le√≠das
    </button>
  </div>
  <mat-divider></mat-divider>

  <div class="notification-list" *ngIf="notifications.length > 0">
    <button mat-menu-item 
            *ngFor="let notification of notifications.slice(0, 5)" 
            class="notification-item"
            [class.unread]="!notification.isRead"
            (click)="markAsRead(notification)">
      <div class="notification-content">
        <div class="notification-icon">
          <mat-icon [class]="getNotificationIconClass(notification.notificationType)">
            {{ getNotificationIcon(notification.notificationType) }}
          </mat-icon>
        </div>
        <div class="notification-text">
          <p class="notification-message">{{ notification.message }}</p>
          <span class="notification-time">{{ getTimeAgo(notification.createdAt) }}</span>
        </div>
      </div>
    </button>
  </div>

  <div class="empty-notifications" *ngIf="notifications.length === 0" (click)="$event.stopPropagation()">
    <mat-icon>notifications_none</mat-icon>
    <p>No hay notificaciones</p>
  </div>

  <mat-divider *ngIf="notifications.length > 0"></mat-divider>
  <button mat-menu-item class="view-all" *ngIf="notifications.length > 5">
    <mat-icon>list</mat-icon>
    Ver todas las notificaciones
  </button>
</mat-menu>
